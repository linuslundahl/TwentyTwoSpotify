!function(){"use strict";var t=function(){this.init()};t.prototype={init:function(){return this.bodyEl=document.body,this.sites=[{url:"22tracks.com",callback:"twentyTwoTracks"},{url:"last.fm",callback:"lastFm"}],this.bodyEl.hasAttribute("data-spotify-links-added")?void 0:(this.bodyEl.setAttribute("data-spotify-links-added",!0),this.checkUrl(),this)},checkUrl:function(){for(var t=0,e=this.sites.length;e>t;t++)window.location.href.indexOf(this.sites[t].url)>-1&&this[this.sites[t].callback]();return this},twentyTwoTracks:function(){var t,e=this,i=!1;return t=function(){for(var t,a,n=document.querySelectorAll(".playlist__track"),s=0,r=n.length;r>s;s++)a=[],t=document.createElement("div"),t.style.position="absolute",t.style.left="20.5px",t.style.top="0",t.style["font-size"]="10px",t.style["text-transform"]="uppercase",a.push('artist:"'+n[s].querySelector(".playlist__artist").textContent+'"'),t.appendChild(e.createLink(a," Artist")),a.push('track:"'+n[s].querySelector(".playlist__title").textContent+'"'),t.appendChild(e.createLink(a," Track")),n[s].appendChild(t),i=!1},t(),document.addEventListener("DOMNodeInserted",function(e){e.relatedNode.classList.contains("playlist")&&!i&&(i=!0,setTimeout(t,2e3))},!0),this},lastFm:function(){var t,e,i,a=this,n=[],s=!0,r=document.querySelectorAll(".page-head")[0];i=function(){var t,e,i,n,s,r,l,o,c=/^http:\/\/(.*\.|)(last\.fm|lastfm\.[^\/]+)\/music\/([^\?#]*)$/i;t=a.bodyEl.getElementsByTagName("a");for(var h=0,d=t.length;d>h;h++)if(e=t[h],e.href&&""!==a.trim(e.textContent)&&!e.className.match(/\blfmButton\b/)&&(i=c.exec(e.href))){if(n=!1,s=i[3].split("/"),0!==s[0].length)for(var u=0,p=s.length;p>u;u++)if("+"===s[u][0]){n=!0;break}if(n)continue;for(r=e;null!==r;){if(r.id&&r.id.match(/^(secondaryNavigation|featuredArtists)$/)||r.className&&r.className.match(/\b(pagehead|image|artistsMegaWithFeatured|artistsSquare)\b/)){n=!0;break}r=r.parentNode}if(n)continue;l=[],l.push({artist:s[0]}),s[1]&&"_"!==s[1]&&l.push({album:s[1]}),s[2]&&l.push({track:s[2]}),o=a.createLink(l),e.nextSibling&&e.nextSibling.hasAttribute&&e.nextSibling.hasAttribute("spotifyLink")||e.parentNode.insertBefore(o,e.nextSibling)}},a.bodyEl.className&&r&&(e=r.getElementsByTagName("h1")[0],a.bodyEl.className.match(/\br\-artist\b/)?(n.push({artist:e.textContent}),s=!1):a.bodyEl.className.match(/\br\-album\b/)?(n.push({artist:e.firstChild.textContent}),n.push({album:e.lastChild.textContent})):a.bodyEl.className.match(/\br\-track\b/)&&(n.push({artist:e.firstChild.textContent}),n.push({track:e.lastChild.textContent.substring(3)})),t=a.createLink(n),e.appendChild(t),s&&r.previousSibling.previousSibling.getElementsByTagName("h1")[0].appendChild(t.cloneNode(!0))),i(),document.addEventListener("DOMNodeInserted",function(t){void 0!==t.originalTarget&&i()},!0)},trim:function(t){return t.replace(/^\s+/,"").replace(/\s+$/,"")},createUrl:function(t){for(var e=[],i=0,a=t.length;a>i;i++)for(var n in t[i])e.push(n+':"'+this.trim(t[i][n])+'"');return"spotify:search:"+encodeURIComponent(e.join(" ")).replace(/%20/g,"+").replace(/%25([0-9]{2})/,"%$1")},createLink:function(t,e){var i,a;return e=e||"",a=document.createElement("img"),a.setAttribute("src","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAAXNSR0IArs4c6QAAAXtJREFUOBHl1EsrRVEUwPHjmUeUibyjFBOPEBNJKT4CZW6gTK58ADE2MTIwMvMFjBiYkUg3SaKkmFEekUf8/9i6LnXvjZlVP+fse/Ze9j6tdaLobyKXNHWmyvpFvnLWdqMHHShEzMzphnNbYBI1wLjAHrpQkiphHpMG4S464S6esY9FbOIQzTBhlCrhAHMm4S7WsYEt3ODHSJUwPJ9g9fmPGZJ+zE4a/3r4DxOGl57Ju7MZLOR65OMUV3iLTBPaXjOofV/++fch3GWacJaFRfC6jSdY1GNoxJfCLmXch2rYDccoQIhibmqwhLXwI1cL3Q6axl3YoR0R+3jwyNVyysELQtxys4thuG4HznWHI7Cb4r7gMizDBp/HEUzYDtuuEqOwUzyF/7gXiTUcZzyHE0St8Aj9SA7fzSpKkh64iTb4QahIfObW/XKcYQpNOIDHtTSG4AfhGolxyUDfwiMbfizHkXgUS2EFC7hHWhEShsmWRBUsB3f9WV/cpxWvOsg/bGzl/3YAAAAASUVORK5CYII="),a.setAttribute("alt","Open In Spotify"),a.setAttribute("height","10"),a.setAttribute("width","10"),a.style.margin="0",a.style["vertical-align"]="middle",i=document.createElement("a"),i.setAttribute("href",this.createUrl(t)),i.style.color="#222",i.style["text-decoration"]="none",i.style.margin="0 5px",i.appendChild(a),i.appendChild(document.createTextNode(e)),i}},window.TwentyTwoSpotify=new t||{}}();