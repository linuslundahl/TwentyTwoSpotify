!function(){"use strict";var t=function(){this.init()};t.prototype={init:function(){return this.bodyEl=document.body,this.sites=[{url:"22tracks.com",callback:"twentyTwoTracks"},{url:"last.fm",callback:"lastFm"}],this.bodyEl.hasAttribute("data-spotify-links-added")?void 0:(this.bodyEl.setAttribute("data-spotify-links-added",!0),this.checkUrl(),this)},checkUrl:function(){for(var t=0,e=this.sites.length;e>t;t++)window.location.href.indexOf(this.sites[t].url)>-1&&this[this.sites[t].callback]();return this},twentyTwoTracks:function(){var t,e=this,i=!1;return t=function(){for(var t,n,r=document.querySelectorAll(".playlist__track"),s=0,a=r.length;a>s;s++)n=[],t=document.createElement("div"),t.style.position="absolute",t.style.left="20.5px",t.style.top="0",t.style["font-size"]="10px",t.style["text-transform"]="uppercase",n.push({artist:'"'+r[s].querySelector(".playlist__artist").textContent+'"'}),t.appendChild(e.createLink(n," Artist")),n.push({track:r[s].querySelector(".playlist__title").textContent}),t.appendChild(e.createLink(n," Track")),r[s].appendChild(t),i=!1},t(),document.addEventListener("DOMNodeInserted",function(e){e.relatedNode.classList.contains("playlist")&&!i&&(i=!0,setTimeout(t,2e3))},!0),this},lastFm:function(){var t,e=this,i=[];t=function(){var t,n,r,s,a=/^http:\/\/(.*\.|)(last\.fm|lastfm\.[^\/]+)\/music\/([^\?#]*)$/i;t=e.bodyEl.getElementsByClassName("link-block-target");for(var l=0,o=t.length;o>l;l++)n=t[l],r=a.exec(n.href),r&&(i=[],i.push({artist:r[3]}),s=e.createLink(i,"","#fff"),n.nextSibling&&n.nextSibling.hasAttribute&&n.nextSibling.hasAttribute("spotifyLink")||n.parentNode.insertBefore(s,n))},t(),document.addEventListener("DOMNodeInserted",function(e){void 0!==e.originalTarget&&t()},!0)},trim:function(t){return t.replace(/^\s+/,"").replace(/\s+$/,"")},createUrl:function(t){for(var e=[],i=0,n=t.length;n>i;i++)for(var r in t[i])e.push(r+":"+this.trim(t[i][r]));return"spotify:search:"+encodeURIComponent(e.join(" ")).replace(/%20/g,"+").replace(/%25([0-9]{2})/,"%$1")},createLink:function(t,e,i){var n,r;return e=e||"",i=i||"#222",r=document.createElement("img"),r.setAttribute("src",'data:image/svg+xml;utf8,<svg viewBox="0 0 10 10" version="1.1" xmlns="http://www.w3.org/2000/svg"><path d="M5,8.8817842e-16 C2.25,8.8817842e-16 0,2.25 0,5 C0,7.75 2.25,10 5,10 C7.75,10 10,7.75 10,5 C10,2.25 7.75,8.8817842e-16 5,8.8817842e-16 L5,8.8817842e-16 Z M7.275,7.225 C7.175,7.375 7,7.425 6.85,7.325 C5.675,6.6 4.2,6.45 2.45,6.85 C2.275,6.9 2.125,6.775 2.075,6.625 C2.025,6.45 2.15,6.3 2.3,6.25 C4.2,5.825 5.85,6 7.15,6.8 C7.325,6.875 7.375,7.075 7.275,7.225 L7.275,7.225 Z M7.9,5.85 C7.775,6.025 7.55,6.1 7.375,5.975 C6.025,5.15 3.975,4.9 2.4,5.4 C2.2,5.45 1.975,5.35 1.925,5.15 C1.875,4.95 1.975,4.725 2.175,4.675 C4,4.125 6.25,4.4 7.8,5.35 C7.95,5.425 8,5.675 7.9,5.85 L7.9,5.85 Z M7.95,4.45 C6.35,3.5 3.675,3.4 2.15,3.875 C1.9,3.95 1.65,3.8 1.575,3.575 C1.5,3.325 1.65,3.075 1.875,3 C3.65,2.475 6.575,2.575 8.425,3.675 C8.65,3.8 8.725,4.1 8.6,4.325 C8.45,4.5 8.175,4.575 7.95,4.45 L7.95,4.45 Z" fill="'+i+'"></path></svg>'),r.setAttribute("alt","Open In Spotify"),r.setAttribute("height","10"),r.setAttribute("width","10"),r.style.margin="0",r.style["vertical-align"]="middle",n=document.createElement("a"),n.setAttribute("href",this.createUrl(t)),n.style.color=i,n.style["text-decoration"]="none",n.style.margin="0 5px",n.appendChild(r),n.appendChild(document.createTextNode(e)),n}},window.TwentyTwoSpotify=new t||{}}();